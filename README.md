[![Build Status](https://travis-ci.org/s-osa/oneshot_task_generator.svg?branch=master)](https://travis-ci.org/s-osa/oneshot_task_generator)
[![Gem Version](https://badge.fury.io/rb/oneshot_task_generator.svg)](https://badge.fury.io/rb/oneshot_task_generator)

# OneshotTaskGenerator

Simple rake task generator for oneshot tasks.

```sh
$ bin/rails generate oneshot FooBar
      create  lib/tasks/oneshot/20180205_foo_bar.rake
```

Then, skeleton file for oneshot rake task will be generated.

```ruby
# Skeleton for this file was generated by `bin/rails generate oneshot FooBar`
# For copy and paste: `bin/rake oneshot:20180205_foo_bar`
namespace :oneshot do
  desc ''
  task '20180205_foo_bar': :environment do
  end
end
```

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'oneshot_task_generator', group: :development
```

And then execute:

```
$ bundle
```

## Customization

### Task Body

```ruby
# config/initializers/oneshot_task_generator.rb
OneshotGenerator.configure do |config|
  config.body = <<-BODY
ActiveRecord::Base.transaction do
  # Write transactional code here
end
  BODY
end
```

```ruby
# Skeleton for this file was generated by `bin/rails generate oneshot FooBar`
# For copy and paste: `bin/rake oneshot:20180208_foo_bar`
namespace :oneshot do
  desc ''
  task '20180208_foo_bar': :environment do
    ActiveRecord::Base.transaction do
      # Write transactional code here
    end
  end
end
```

### Arguments

```ruby
# config/initializers/oneshot_task_generator.rb
OneshotGenerator.configure do |config|
  config.arguments = ['task', 'args']
end
```

```ruby
# Skeleton for this file was generated by `bin/rails generate oneshot FooBar`
# For copy and paste: `bin/rake oneshot:20180208_foo_bar`
namespace :oneshot do
  desc ''
  task '20180208_foo_bar': :environment do |task, args|
  end
end
```

### Directory

```ruby
# config/initializers/oneshot_task_generator.rb
OneshotGenerator.configure do |config|
  config.directory = 'your/favorite/directory' # Default: lib/tasks/oneshot
end
```

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/s-osa/oneshot_task_generator.
